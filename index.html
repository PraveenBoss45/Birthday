<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Birthday & Gallery</title>

<!-- Premium Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Philosopher:wght@700&family=Poppins:wght@400;600&family=Yellowtail&display=swap" rel="stylesheet">

<style>
  body, html { margin:0; padding:0; width:100%; height:100%; overflow:hidden; font-family:sans-serif; background:#000; }

  #fireworkCanvas { position:absolute; left:0; top:0; width:100vw; height:100vh; display:block; pointer-events:none; z-index:1; }

  /* Fade transition styles */
  .fade {
    transition: opacity 1s ease, transform 1s ease;
    opacity: 0;
    transform: scale(0.95);
    pointer-events: none;
  }
  .show {
    opacity: 1;
    transform: scale(1);
    pointer-events: auto;
  }

  .birthdayText {
    position: absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:5rem; font-weight:700; color:#ff6e7f; text-transform:uppercase; letter-spacing:3px; text-align:center; z-index:2;
  }
  .birthdayText::before {
    content:''; position:absolute; top:0; left:-150%; width:150%; height:100%;
    background: linear-gradient(120deg, rgba(255,0,0,0) 0%, rgba(255,0,0,0.6) 10%, rgba(255,127,0,0.6) 20%, rgba(255,255,0,0.6) 30%, rgba(0,255,0,0.6) 40%, rgba(0,0,255,0.6) 50%, rgba(75,0,130,0.6) 60%, rgba(148,0,211,0.6) 70%, rgba(255,0,0,0.6) 80%, rgba(255,0,0,0) 100%);
    transform: skewX(-20deg); animation: shimmerRainbow 3s infinite 8s; pointer-events:none; z-index:3;
  }
  @keyframes shimmerRainbow { 0% { left:-150%; } 50% { left:100%; } 100% { left:100%; } }

  #typingMessage {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    font-size:2rem; font-weight:700; color:#ff6e7f; text-transform:uppercase;
    letter-spacing:2px; text-align:center; white-space:pre-wrap; max-width:80vw; line-height:1.3;
    border-right:2px solid #fff; padding-right:5px; z-index:10; animation: blink 0.7s steps(1) infinite; background:#000;
  }
  @keyframes blink { 0%,50%,100% { border-color:#fff; } 25%,75% { border-color:transparent; } }

  /* --- Updated Premium Welcome Overlay Design --- */
  #galleryWelcome {
    position: fixed;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 50;
    background: radial-gradient(circle at 20% 30%, #1a1a40, #0e0e23 70%);
    overflow: hidden;
    border-radius: 20px;
    padding: 40px;
    color: #fff;
  }

  #galleryWelcome::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(130deg, rgba(255, 99, 233, 0.25), rgba(0, 247, 255, 0.25), rgba(255, 238, 88, 0.25));
    background-size: 300% 300%;
    animation: auroraShift 7s ease-in-out infinite;
    z-index: 0;
    mix-blend-mode: lighten;
    border-radius: 20px;
  }
  @keyframes auroraShift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  #welcomeContent {
    position: relative;
    text-align: center;
    padding: 40px 60px;
    border-radius: 20px;
    background: rgba(255, 255, 255, 0.07);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
    font-family: 'Philosopher', 'Poppins', sans-serif;
    color: #ffffff;
    z-index: 1;
    font-size: 3rem;
  }

  #welcomeContent span {
    display: inline-block;
    font-family: 'Yellowtail', cursive;
    font-size: 5rem;
    color: #ffe267;
    text-shadow: 0 0 10px #ffe267, 0 0 40px #fcd76a;
  }

  /* Enhanced Premium Carousel */
  .carousel-container {
    position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
    display: flex; justify-content: center; align-items: center; perspective: 1500px;
    width: 80vw; max-width: 700px; height: 55vw; max-height: 380px;
    z-index: 40;
    box-shadow: 0 0 30px 10px rgba(255, 110, 127, 0.25);
    border-radius: 20px;
    background: rgba(255, 110, 127, 0.1);
    backdrop-filter: blur(30px);
    -webkit-backdrop-filter: blur(30px);
  }

  #carousel {
    width: 100%; height: 100%; position: relative;
    transform-style: preserve-3d; transition: transform 1s ease-out;
    z-index: 1;
  }

  #carousel img {
    position: absolute;
    width: 38vw; max-width: 220px; height: 48vw; max-height: 280px;
    left: 50%; top: 50%; object-fit: cover;
    border-radius: 18px;
    border: 4px solid;
    border-image-slice: 1;
    border-width: 4px;
    border-image-source: linear-gradient(45deg, #ff6e7f, #fcd76a);
    transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.4s;
    transform: translate(-50%, -50%) scale(0.85);
    box-shadow: 0 4px 15px rgba(255, 110, 127, 0.25);
    filter: drop-shadow(0 0 6px rgba(255, 110, 127, 0.15));
    z-index: 2;
  }

  #carousel img.centered,
  #carousel img:hover {
    transform: translate(-50%, -50%) scale(1.1) rotateY(15deg);
    box-shadow: 0 0 40px 8px #ff6e7f, 0 5px 25px rgba(255, 110, 127, 0.6);
    filter: drop-shadow(0 0 10px #ff6e7f);
    border-image-source: linear-gradient(45deg, #ff4757, #fcd76a);
    z-index: 10;
    cursor: pointer;
  }

  #carousel img::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 22%;
    bottom: -20%;
    left: 0;
    border-radius: 18px;
    background: linear-gradient(to top, rgba(255,110,127,0.4), transparent);
    filter: blur(9px);
    opacity: 0.5;
    pointer-events: none;
  }
</style>
</head>

<body>

<canvas id="fireworkCanvas"></canvas>

<div id="birthdayText" class="birthdayText show">HAPPY BIRTHDAY ASMITA !!!</div>

<div id="typingMessage" class="fade"></div>

<div id="galleryWelcome" class="fade">
  <div id="welcomeContent">
    Step inside your special photo gallery, <span>ASMITA !</span><br>
    Relive the best memories with every click.
  </div>
</div>

<div class="carousel-container fade" id="gallery"><div id="carousel"></div></div>

<div id="birthdayAgain" class="birthdayText fade">
  HAPPY BIRTHDAY TO YOU ONCE AGAIN! 
  <br>
  <span style="font-size: 1.2rem;">â€“ From Praveen.. ðŸ’–</span>
</div>
<audio id="typingSound" src="https://www.soundjay.com/mechanical/sounds/keyboard-1.mp3" preload="auto"></audio>

<script>
const canvas = document.getElementById('fireworkCanvas');
const ctx = canvas.getContext('2d');
let W = window.innerWidth, H = window.innerHeight;
function resize(){ W=window.innerWidth; H=window.innerHeight; canvas.width=W; canvas.height=H; }
window.addEventListener('resize', resize); resize();

function randomColor(){ const h=Math.floor(Math.random()*360); const s=95+Math.random()*5; const l=55+Math.random()*20; return `hsl(${h},${s}%,${l}%)`; }

class Rocket{ constructor(){ this.x=W*(0.15+Math.random()*0.7); this.y=H-12; this.vy=-(6+Math.random()*3); this.vx=(Math.random()-0.5)*1.2; this.hasBurst=false; this.burstY=H*0.25+Math.random()*H*0.4; this.trail=[]; this.particles=[]; this.mainColor=randomColor(); } update(){ if(!this.hasBurst){ this.trail.push({x:this.x,y:this.y,alpha:1,color:this.mainColor}); if(this.trail.length>16)this.trail.shift(); this.x+=this.vx; this.y+=this.vy; this.vy+=0.08; this.trail.forEach(t=>t.alpha*=0.82); if(this.y<=this.burstY || this.vy>2.0)this.burst(); } else { this.particles.forEach(p=>p.update()); } } draw(ctx){ if(!this.hasBurst){ this.trail.forEach((t,i)=>{ if(t.alpha>0.01){ ctx.save(); ctx.globalAlpha=t.alpha; ctx.beginPath(); ctx.arc(t.x,t.y,2.1-i*0.13,0,2*Math.PI); ctx.fillStyle=t.color; ctx.shadowColor=t.color; ctx.shadowBlur=8; ctx.fill(); ctx.restore(); } }); ctx.save(); ctx.beginPath(); ctx.arc(this.x,this.y,5,0,2*Math.PI); ctx.fillStyle="#fff"; ctx.shadowColor=this.mainColor; ctx.shadowBlur=40; ctx.globalAlpha=0.98; ctx.fill(); ctx.restore(); } else { this.particles.forEach(p=>p.draw(ctx)); } } burst(){ this.hasBurst=true; const count=70+Math.floor(Math.random()*30); for(let i=0;i<count;i++){ const angle=(i/count)*Math.PI*2; const speed=2.8+Math.random()*2.5; const color=randomColor(); this.particles.push(new Particle(this.x,this.y,Math.cos(angle)*speed*(0.9+Math.random()*0.15),Math.sin(angle)*speed*(0.9+Math.random()*0.1),color,this.mainColor)); } } done(){ return this.hasBurst && this.particles.every(p=>p.alpha<=0.01); } }
class Particle{ constructor(x,y,vx,vy,color,coreColor){ this.x=x; this.y=y; this.vx=vx; this.vy=vy; this.baseColor=color; this.coreColor=coreColor; this.radius=3+Math.random()*2.8; this.alpha=1; this.gravity=0.02+Math.random()*0.01; this.friction=0.982+Math.random()*0.01; this.colorPhase=Math.floor(Math.random()*360);} update(){ this.x+=this.vx; this.y+=this.vy; this.vy+=this.gravity; this.vx*=this.friction; this.vy*=this.friction; this.alpha-=0.010+Math.random()*0.009; this.colorPhase=(this.colorPhase+2)%360;} draw(ctx){ if(this.alpha>0){ ctx.save(); ctx.globalAlpha=Math.max(0,this.alpha); let grad=ctx.createRadialGradient(this.x,this.y,0,this.x,this.y,this.radius*3); grad.addColorStop(0,"#fff"); grad.addColorStop(0.15,this.baseColor); grad.addColorStop(0.6,`hsl(${this.colorPhase},98%,59%)`); grad.addColorStop(1,this.coreColor); ctx.beginPath(); ctx.arc(this.x,this.y,this.radius,0,2*Math.PI); ctx.fillStyle=grad; ctx.shadowColor="#fff"; ctx.shadowBlur=25; ctx.fill(); ctx.restore(); } } }

let rockets=[]; let frame=0; let fireworkDimmed = false;
function animate(){ ctx.globalAlpha=fireworkDimmed?1:0.18; ctx.fillStyle="#000"; ctx.fillRect(0,0,W,H); ctx.globalAlpha=1; rockets.forEach(fw=>{ fw.update(); fw.draw(ctx); }); rockets=rockets.filter(fw=>!fw.done()); frame++; if(!fireworkDimmed && frame%(25+Math.floor(Math.random()*10))===0){ rockets.push(new Rocket()); if(Math.random()>0.7) rockets.push(new Rocket()); } requestAnimationFrame(animate); }
animate();

const galleryWelcome = document.getElementById('galleryWelcome');
const gallery = document.getElementById('gallery');
const carousel = document.getElementById('carousel');
const birthdayText = document.getElementById('birthdayText');
const birthdayAgain = document.getElementById('birthdayAgain');
const typingMessage = document.getElementById('typingMessage');
const typingSound = document.getElementById('typingSound');

const images = [
  "Media2/C 1.jpg", "Media2/C 2.jpg", "Media2/C 3.jpg", "Media2/C 4.jpg",
  "Media2/C 5.jpg", "Media2/C 6.jpg", "Media2/C 7.jpg", "Media2/C 8.jpg",
  "Media2/C 9.jpg", "Media2/C 10.jpg"
];

let rotationY = 0;

function setupCarousel(){
  carousel.innerHTML = '';
  const total = images.length;
  const angleStep = 360 / total;
  const radiusVW = 25;

  images.forEach((src, i) => {
    const img = document.createElement('img');
    img.src = src;
    img.alt = `Birthday photo ${i + 1}`;
    img.style.transform = `rotateY(${i * angleStep}deg) translateZ(${radiusVW}vw) translate(-50%, -50%)`;
    carousel.appendChild(img);
  });
}

function animateCarousel(){
  rotationY += 0.3;
  carousel.style.transform = `rotateY(${rotationY}deg)`;

  // Highlight centered image
  const imgs = carousel.querySelectorAll('img');
  const total = imgs.length;
  let index = Math.round((rotationY / 360) * total) % total;
  if(index < 0) index += total;

  imgs.forEach((img, i) => {
    if(i === index) img.classList.add('centered');
    else img.classList.remove('centered');
  });

  requestAnimationFrame(animateCarousel);
}

function fadeOut(element) {
  return new Promise(resolve => {
    element.classList.remove('show');
    element.classList.add('fade');
    setTimeout(resolve, 1000); // match the CSS 1s transition
  });
}

function fadeIn(element) {
  return new Promise(resolve => {
    element.classList.remove('fade');
    element.classList.add('show');
    setTimeout(resolve, 1000);
  });
}

const messageText = `Happy Birthday ASMITA !! I hope today treats you as wonderfully as you make everyone else feel just by being yourself. I wonâ€™t lieâ€¦ part of me is hoping this year gives us a few more chances to laugh together, share some secrets, and maybe steal a little more of each otherâ€™s attention ðŸ˜‰. Youâ€™re unforgettable, and Iâ€™m just lucky to know you.`;

async function typeMessage(index=0) {
  fireworkDimmed = true;
  if (index === 0) {
    await fadeOut(birthdayText);
    await fadeIn(typingMessage);
  }
  if (index < messageText.length) {
    typingMessage.innerHTML += messageText.charAt(index);
    typingSound.currentTime = 0;
    typingSound.play();
    setTimeout(() => typeMessage(index + 1), 120 + Math.random() * 50);
  } else {
    fireworkDimmed = false;
    setTimeout(async () => {
      await fadeOut(typingMessage);
      await fadeIn(galleryWelcome);
      setTimeout(async () => {
        await fadeOut(galleryWelcome);
        await fadeIn(gallery);
        setupCarousel();
        animateCarousel();
        setTimeout(async () => {
          await fadeOut(gallery);
          await fadeIn(birthdayAgain);
        }, 30000);
      }, 6000);
    }, 1500);
  }
}

setTimeout(() => {
  typeMessage();
}, 6000);
</script>

</body>
</html>
