<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Swipeable 3D Rotating Image Carousel with Birthday Surprise & Cake</title>
<style>
  body {
    background: rgb(3, 170, 190);
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
    perspective: 1000px;
    flex-direction: column;
    overflow-x: hidden;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  }

  /* Moving text */
  .moving-text {
    position: absolute;
    top: 10px;
    font-size: clamp(50px, 4vw, 28px);
    font-weight: bold;
    color: rgb(222, 209, 222);
    animation: moveText 15s linear infinite;
    white-space: nowrap;
    user-select: none;
    z-index: 10;
  }
  @keyframes moveText {
    0% { transform: translateX(100vw); }
    100% { transform: translateX(-100%); }
  }

  .carousel-container {
    position: relative;
  }

  .carousel {
    width: 60vw;
    max-width: 300px;
    height: 60vw;
    max-height: 300px;
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.2s ease-out;
  }

  .carousel img {
    position: absolute;
    width: 40vw;
    max-width: 200px;
    height: 50vw;
    max-height: 250px;
    object-fit: cover;
    left: 50%;
    top: 50%;
    border-radius: 10px;
    border: 3px solid white;
    transition: transform 0.3s, box-shadow 0.3s, border-color 0.3s;
    user-select: none;
  }

  .carousel img:hover {
    transform: scale(1.2) translate(-50%, -50%);
    box-shadow: 0 0 20px yellow;
  }

  .carousel img.active {
    border: 4px solid cyan;
    box-shadow: 0 0 25px cyan;
  }

  /* Preview box */
  .preview-box {
    position: fixed;
    right: 2vw;
    top: 50%;
    transform: translateY(-50%);
    width: clamp(150px, 25vw, 220px);
    height: clamp(200px, 35vw, 280px);
    border-radius: 10px;
    border: 4px solid rgb(24, 181, 37);
    box-shadow: 0 0 15px rgba(0,0,0,0.5);
    overflow: hidden;
    background: rgb(73, 196, 24);
    z-index: 999;
    user-select: none;
  }

  .preview-box img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  /* Mobile adjustment */
  @media (max-width: 600px) {
    .carousel {
      width: 80vw;
      height: 80vw;
    }
    .carousel img {
      width: 55vw;
      height: 65vw;
    }
    .preview-box {
      position: relative;
      top: auto;
      right: auto;
      transform: none;
      margin-top: 20px;
    }
  }

  /* ===== Welcome overlay ===== */
  #welcome-overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(135deg, #FFD700, #FF6347);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    overflow: hidden;
    user-select: none;
  }

  #welcome-overlay.hide {
    display: none;
  }

  .welcome-text {
    font-size: clamp(24px, 6vw, 48px);
    font-weight: 900;
    color: #ffffff;
    text-shadow: 2px 2px 8px #000;
    margin-bottom: 2rem;
    user-select: none;
    z-index: 15;
  }

  /* Balloons container */
  #balloons-container {
    position: absolute;
    width: 100vw;
    height: 40vh;
    bottom: 0;
    pointer-events: none;
    z-index: 10;
  }

  /* Balloon style */
  .balloon {
    position: absolute;
    bottom: 0;
    width: 40px;
    height: 60px;
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    background-color: red;
    opacity: 0.9;
    animation-timing-function: ease-out;
    animation-fill-mode: forwards;
  }

  .balloon::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    width: 2px;
    height: 15px;
    background: #333;
    transform: translateX(-50%);
  }

  /* Balloon colors */
  .balloon.red { background: #e74c3c; }
  .balloon.blue { background: #3498db; }
  .balloon.green { background: #2ecc71; }
  .balloon.yellow { background: #f1c40f; }
  .balloon.purple { background: #9b59b6; }

  /* Balloon floating up animation */
  @keyframes floatUp {
    0% {
      bottom: 0;
      opacity: 0.9;
      transform: translateX(0) scale(1);
    }
    80% {
      opacity: 0.9;
    }
    100% {
      bottom: 120vh;
      opacity: 0;
      transform: translateX(30px) scale(1.2);
    }
  }

  /* Balloon burst animation */
  @keyframes burst {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(2) rotate(45deg);
      opacity: 0;
    }
  }

  /* ===== Cake styles ===== */
  #cake-container {
    position: relative;
    width: 250px;
    height: 250px;
    z-index: 20;
  }
  #cake-container img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    user-select: none;
  }

  /* Candle flame */
  .flame {
    position: absolute;
    top: 40px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 45px;
    background: radial-gradient(circle at center, #fffc80 40%, #ff7a00 90%);
    border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
    filter: drop-shadow(0 0 3px #ffb700);
    animation: flicker 1.5s infinite alternate ease-in-out;
    pointer-events: none;
  }

  @keyframes flicker {
    0% {
      opacity: 1;
      transform: translateX(-50%) scale(1);
      filter: drop-shadow(0 0 3px #ffb700);
    }
    50% {
      opacity: 0.7;
      transform: translateX(calc(-50% + 2px)) scale(1.1);
      filter: drop-shadow(0 0 8px #ffbf00);
    }s
    100% {
      opacity: 1;
      transform: translateX(-50%) scale(1);
      filter: drop-shadow(0 0 3px #ffb700);
    }
  }

  /* === New styles for 3D Welcome message === */
  #welcome-3d {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: linear-gradient(45deg, #6c1977, #d65d11);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 10001;
    perspective: 800px;
    user-select: none;
  }

  /* Initially hide with .hide */
  .hide {
    display: none !important;
  }

  .welcome-3d-text {
    font-size: clamp(30px, 8vw, 64px);
    font-weight: 900;
    color: #fff;
    text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
    animation: rotate3d 4s ease-in-out infinite alternate;
    transform-style: preserve-3d;
    padding: 0 20px;
    text-align: center;
  }

  @keyframes rotate3d {
    0% {
      transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateZ(0);
      text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
    }
    50% {
      transform: rotateX(15deg) rotateY(20deg) rotateZ(10deg) translateZ(20px);
      text-shadow: 0 0 20px #00ffff, 0 0 30px #00ffff;
    }
    100% {
      transform: rotateX(0deg) rotateY(0deg) rotateZ(0deg) translateZ(0);
      text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
    }
  }
</style>
</head>
<body>

<!-- Welcome overlay with birthday message, cake, and balloons -->
<div id="welcome-overlay">
  <div class="welcome-text">
    ðŸŽ‰ HAPPY BIRTHDAY<span id="user-name"> PRAVEEN</span> !!! ðŸŽ‰
  </div>

  <div id="balloons-container"></div>
</div>

<!-- New 3D Welcome message shown after birthday overlay hides -->
<div id="welcome-3d" class="hide">
  <div class="welcome-3d-text">Welcome to the Gallery, Praveen!</div>
</div>

<div class="moving-text">Welcome to My Rotating Image Gallery!   Wishing you a very fruitful birthday to you</div>

<div class="carousel-container">
  <div class="carousel" id="carousel">
    <img src="Media/Photos.jpg" alt="">
    <img src="Media/Beach.jpg" alt="">
    <img src="Media/college.jpg" alt="">
    <img src="Media/Bike.jpg" alt="">
    <img src="Media/DAM (2).jpg" alt="">
    <img src="Media/wedding.jpg" alt="">
    <img src="Media/dam.jpg" alt="">
    <img src="Media/bike.jpeg" alt="">
    <img src="Media/college.jpg" alt="">
    <img src="Media/DAM (2).jpg" alt="">
  </div>
</div>

<!-- Fixed preview box -->
<div class="preview-box">
  <img src="Media/Photos.jpg" alt="Preview" id="preview-img">
</div>

<script>
const carousel = document.getElementById('carousel');
const images = carousel.querySelectorAll('img');
const previewImg = document.getElementById('preview-img');

let totalImages = images.length;
let angle = 360 / totalImages;
let radius = window.innerWidth <= 600 ? 40 : 30; // vw
let rotationY = 0;
let autoRotateSpeed = 0.2; // degrees per frame
let isDragging = false;
let startX = 0;
let currentRotation = 0;

// Position images in a circle
function positionCarousel() {
  radius = window.innerWidth <= 600 ? 40 : 30;
  angle = 360 / totalImages;
  images.forEach((img, index) => {
    img.style.transform = `rotateY(${index * angle}deg) translateZ(${radius}vw) translate(-50%, -50%)`;
    img.onclick = () => {
      images.forEach(i => i.classList.remove('active'));
      img.classList.add('active');
      previewImg.src = img.src;
    };
  });
}
positionCarousel();
window.addEventListener('resize', positionCarousel);

// Auto-rotate
function animate() {
  if (!isDragging) {
    rotationY += autoRotateSpeed;
    carousel.style.transform = `rotateY(${rotationY}deg)`;
  }
  requestAnimationFrame(animate);
}
animate();

// Mouse / Touch drag
function startDrag(x) {
  isDragging = true;
  startX = x;
  currentRotation = rotationY;
}

function dragMove(x) {
  if (isDragging) {
    const delta = (x - startX) * 0.5; // sensitivity
    rotationY = currentRotation + delta;
    carousel.style.transform = `rotateY(${rotationY}deg)`;
  }
}

function endDrag() {
  isDragging = false;
}

// Mouse events
carousel.addEventListener('mousedown', e => startDrag(e.clientX));
window.addEventListener('mousemove', e => dragMove(e.clientX));
window.addEventListener('mouseup', endDrag);

// Touch events
carousel.addEventListener('touchstart', e => startDrag(e.touches[0].clientX));
window.addEventListener('touchmove', e => dragMove(e.touches[0].clientX));
window.addEventListener('touchend', endDrag);

// ===== Welcome overlay & balloon surprise =====
const welcomeOverlay = document.getElementById('welcome-overlay');
const balloonsContainer = document.getElementById('balloons-container');
const userNameSpan = document.getElementById('user-name');

// Optional: Change user name dynamically here
// userNameSpan.textContent = 'YourName';

function createBalloon() {
  const balloon = document.createElement('div');
  balloon.classList.add('balloon');
  const colors = ['red', 'blue', 'green', 'yellow', 'purple'];
  balloon.classList.add(colors[Math.floor(Math.random() * colors.length)]);
  balloon.style.left = Math.random() * 90 + 'vw';
  balloon.style.animation = `floatUp ${4 + Math.random() * 3}s ease-out forwards`;
  balloon.style.animationDelay = (Math.random() * 3000) + 'ms';
  return balloon;
}

// Create 20 balloons
for (let i = 0; i < 20; i++) {
  const balloon = createBalloon();
  balloonsContainer.appendChild(balloon);
}

// Burst balloons one by one after 2 seconds (adjustable)
function burstBalloons() {
  const balloons = document.querySelectorAll('.balloon');
  balloons.forEach((balloon, i) => {
    setTimeout(() => {
      balloon.style.animation = 'burst 0.5s forwards';
    }, i * 100);
  });
}

// Hide birthday overlay and show 3D welcome message sequentially
setTimeout(() => {
  burstBalloons();

  setTimeout(() => {
    welcomeOverlay.classList.add('hide'); // Hide birthday overlay
    const welcome3d = document.getElementById('welcome-3d');
    welcome3d.classList.remove('hide');   // Show 3D welcome message

    // Hide 3D welcome message after 4 seconds
    setTimeout(() => {
      welcome3d.classList.add('hide');    // Hide 3D welcome message
    }, 4000);

  }, 1500); // wait for balloons burst animation to finish

}, 2000);
</script>

</body>
</html>
